<!-- Heading -->
# http 모듈로 서버 만들기

서버에서는 요청을 받는 부분과 응답을 보내는 부분이 있어야 합니다. 요청과 응답은 이벤트 방식이라고 생각하면 됩니다. 클라이언트로부터 요청이 왔을 때 어떤 작업을 수행할지 이벤트 리스너를 미리 등록해두어야 한다.

<br>
http 서버가 있어야 웹 브라우저의 요청을 처리할 수 있으므로 http 모듈을 사용한다. http 모듈에는 createServer 메서드가 있습니다. 인수로 요청에 대한 콜백 함수를 넣을 수 있으며, 요청이 들어올 때마다 매번 콜백 함수가 실행된다.

<br>
포트는 서버 내에서 프로세스를 구분하는 번호입니다. 서버는 HTTP 요청을 대기하는 것 외에도 다양한 작업을 합니다.
<br>
Database와도 통신해야 하고, FTP 요청을 처리함. 서버는 프로세스에 포트를 다르게 할당하여 들어오는 요청을 구분함. 유명한 포트 번호로는 21(FTP), 80(HTTP), 443(HTTPS), 3306(MYSQL) 이 있습니다.

<br>
<br>

<!-- Heading -->
# createServer 메서드 관련
<!-- Quote -->
> 보통 createServer 메서드 뒤에 listen 메서드를 붙이고 클라이언트에 공개할 포트 번호와 포트 연결 완료 후 실행될 콜백 함수를 넣습니다. listen 메서드에 콜백 함수를 넣는 대신, listening 이벤트 리스너를 붙여도 된다.

> res 객체에는 res.writeHead 와 res.write, res.end 메서드가 있습니다. res.writeHead는 응답에 대한 정보를 기록하는 메서드입니다. 첫 번째 인수로 성공적인 요청임을 의미하는 200을, 두번 째 인수로 응답에 대한 정보를 보내는데 콘텐츠의 형식이 HTML인지 알리거나 여러 방식이 있다. 이 정보가 기록되는 부분을 헤더라고 부름.

> res.write 메서드의 첫 번째 인수는 클라이언트로 보낼 데이터입니다. 버퍼를 보낼 수도 있다. 여러 번 호출해서 데이터를 여러 개 보내도 되고, 데이터가 기록되는 부분을 본문(Body)라고 부른다.

>res.end는 응답을 종료하는 메서드입니다. 만약 인수가 있다면 그 데이터도 클라이언트로 보내고 응답을 종료합니다.

> 서버의 소스 코드를 변경할 때 서버가 자동으로 변경 사항을 반영하지 않는다. 서버를 종료했다가 다시 실행해야 변경 사항이 반영됩니다.

<br>
<br>

<!-- Heading -->
## HTTP 상태 코드
<!-- Bullet List -->
* 2XX: 성공을 알리는 상태 코드입니다. 대표적으로 200(성공), 201(작성됨)이 많이 사용됨.
* 3XX: 리다이렉션(다른 페이지로 이동)을 알리는 상태 코드입니다. 어떤 주소를 입력했는데 다른 주소의 페이지로 넘어갈 때 이코드가 사용됩니다. 대표적으로 301(영구 이동), 302(임시 이동)가 있다. 304(수정되지 않음)는 요청의 응답으로 캐시를 사용했다는 뜻이다.

* 4XX: 요청 오류를 나타냅니다. 요청 자체에 오류가 있을 때 표시됩니다. 대표적으로 400(잘못된 요청), 401(권한 없음), 403(금지됨), 404(찾을 수 없음)가 있습니다.

* 5XX: 서버 오류를 나타냅니다. 요청은 제대로 왔지만 서버에 오류가 생겼을 때 발생. 이 오류가 뜨지 않도록 주의해서 프로그래밍해야 합니다. 500(내부 서버 오류), 502(불량 게이트웨이), 503(서비스를 사용할 수 없음)이 자주 사용됨

<!-- Heading -->
# REST와 라우팅 사용하기

<!-- Bullet list -->
> 서버에 요청을 보낼 때는 주소를 통해 요청의 내용을 표현합니다. 항상 httml만 요청할 필요는 없다. css나 js 또는 이미지 같은 파일을 요청할 수도 있고 특정 동작을 행하는 것을 요청할 수도 있습니다. 요청의 내용이 주소를 통해 표현되므로 서버가 이해하기 쉬운 주소를 사용하는 것이 좋습니다. 여기서 REST가 등장합니다.

> REST는 REpresentational State Transfer의 줄임말이며, 서버의 자원을 정의하고 자원에 대한 주소를 지정하는 방법을 가리킵니다. 단순히 명사만 있으면 무슨 동작을 행하라는 것인지 알기 어려우므로 REST에서는 주소 외에도 HTTP요청 메서드라는 것을 사용한다.

* GET: 서버 자원을 가져오고자 할 때 사용합니다.
* POST: 서버에 자원을 새로 등록하고자 할 때 사용합니다. 요청의 본문에 새로 등록할 데이터를 넣어 보냅니다.
* PUT: 서버의 자원을 요청에 들어 있는 자원으로 치환하고자 할 때 사용합니다. 요청의 본문에 치환할 데이터를 넣어 보냅니다.
* PATCH: 서버 자원의 일부만 수정하고자 할 때 사용합니다. 요청의 본문에 일부 수정할 데이터를 넣어 보냅니다.
* OPTIONS: 요청을 하기 전에 통신 옵션을 설명하기 위해 사용한다.

> 이렇게 주소와 메서드만 보고 요청의 내용을 알아볼 수 있다는 것이 장점입니다. 그리고 HTTP 통신을 사용하면 클라이언트가 누구든 상관없이 같은 방식으로 서버와 소통할 수 있습니다. IOS, 안드로이드, 웹, 다른 서버가 모두 같은 주소로 요청을 보낼 수 있다.

